pre-commit:
  parallel: false
  commands:
    update-lockfiles:
      run: uv lock
      stage_fixed: true
    format:
      glob: "*.py"
      run: uv run black {staged_files}
      stage_fixed: true
    lint:
      glob: "*.py"
      run: uv run flake8 {staged_files}
    isort:
      glob: "*.py"
      run: uv run isort {staged_files}
      stage_fixed: true
    security:
      run: make security
      stage_fixed: true
    actionlint:
      glob: ".github/workflows/*.y*ml"
      run: actionlint {staged_files}

pre-push:
  parallel: true
  commands:
    tests:
      run: make test
    detect-secrets:
      run: uv run python scripts/check_detect_secrets.py
    validate-site:
      run: uv run python scripts/validate_site_generation.py
    actionlint:
      run: actionlint
